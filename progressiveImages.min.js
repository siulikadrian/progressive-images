!function(e,t){"function"==typeof define&&define.amd?define(["jquery","lodash"],t):e.mylib=t(e.$,e._)}(this,function(e){var t,i,n;return function(e){function r(e,t){return v.call(e,t)}function o(e,t){var i,n,r,o,s,a,u,c,f,p,l,g,h=t&&t.split("/"),m=k.map,d=m&&m["*"]||{};if(e){for(e=e.split("/"),s=e.length-1,k.nodeIdCompat&&A.test(e[s])&&(e[s]=e[s].replace(A,"")),"."===e[0].charAt(0)&&h&&(g=h.slice(0,h.length-1),e=g.concat(e)),f=0;f<e.length;f++)if(l=e[f],"."===l)e.splice(f,1),f-=1;else if(".."===l){if(0===f||1===f&&".."===e[2]||".."===e[f-1])continue;f>0&&(e.splice(f-1,2),f-=2)}e=e.join("/")}if((h||d)&&m){for(i=e.split("/"),f=i.length;f>0;f-=1){if(n=i.slice(0,f).join("/"),h)for(p=h.length;p>0;p-=1)if(r=m[h.slice(0,p).join("/")],r&&(r=r[n])){o=r,a=f;break}if(o)break;!u&&d&&d[n]&&(u=d[n],c=f)}!o&&u&&(o=u,a=c),o&&(i.splice(0,a,o),e=i.join("/"))}return e}function s(t,i){return function(){var n=b.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),h.apply(e,n.concat([t,i]))}}function a(e){return function(t){return o(t,e)}}function u(e){return function(t){y[e]=t}}function c(t){if(r(T,t)){var i=T[t];delete T[t],w[t]=!0,g.apply(e,i)}if(!r(y,t)&&!r(w,t))throw new Error("No "+t);return y[t]}function f(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function p(e){return e?f(e):[]}function l(e){return function(){return k&&k.config&&k.config[e]||{}}}var g,h,m,d,y={},T={},k={},w={},v=Object.prototype.hasOwnProperty,b=[].slice,A=/\.js$/;m=function(e,t){var i,n=f(e),r=n[0],s=t[1];return e=n[1],r&&(r=o(r,s),i=c(r)),r?e=i&&i.normalize?i.normalize(e,a(s)):o(e,s):(e=o(e,s),n=f(e),r=n[0],e=n[1],r&&(i=c(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:i}},d={require:function(e){return s(e)},exports:function(e){var t=y[e];return"undefined"!=typeof t?t:y[e]={}},module:function(e){return{id:e,uri:"",exports:y[e],config:l(e)}}},g=function(t,i,n,o){var a,f,l,g,h,k,v,b=[],A=typeof n;if(o=o||t,k=p(o),"undefined"===A||"function"===A){for(i=!i.length&&n.length?["require","exports","module"]:i,h=0;h<i.length;h+=1)if(g=m(i[h],k),f=g.f,"require"===f)b[h]=d.require(t);else if("exports"===f)b[h]=d.exports(t),v=!0;else if("module"===f)a=b[h]=d.module(t);else if(r(y,f)||r(T,f)||r(w,f))b[h]=c(f);else{if(!g.p)throw new Error(t+" missing "+f);g.p.load(g.n,s(o,!0),u(f),{}),b[h]=y[f]}l=n?n.apply(y[t],b):void 0,t&&(a&&a.exports!==e&&a.exports!==y[t]?y[t]=a.exports:l===e&&v||(y[t]=l))}else t&&(y[t]=n)},t=i=h=function(t,i,n,r,o){if("string"==typeof t)return d[t]?d[t](i):c(m(t,p(i)).f);if(!t.splice){if(k=t,k.deps&&h(k.deps,k.callback),!i)return;i.splice?(t=i,i=n,n=null):t=e}return i=i||function(){},"function"==typeof n&&(n=r,r=o),r?g(e,t,i,n):setTimeout(function(){g(e,t,i,n)},4),h},h.config=function(e){return h(e)},t._defined=y,n=function(e,t,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(i=t,t=[]),r(y,e)||r(T,e)||(T[e]=[e,t,i])},n.amd={jQuery:!0}}(),n("node_modules/almond/almond",function(){}),n("src/config",[],function(){var e={};return e.IMAGE_STRATEGY="image",e.POSTER_STRATEGY="poster",e.LINK_STRATEGY="href",e.BACKGROUND_STRATEGY="background",e.avalaibleStrategy=[e.IMAGE_STRATEGY,e.BACKGROUND_STRATEGY,e.POSTER_STRATEGY,e.LINK_STRATEGY],e.attrNameSlug="progressive-image-src",e.positionAttrSlug="focus-image-config",e.progressiveImageVisibleClass="progressive__image--visible",e.isLazyLoadStrategy=!1,e.breakpoints=["none","w360","w480","w768","w768@2x","w1280","w1280@2x","w1920","w2560","w3840"],e}),n("src/utils/inViewport",[],function(){return function(t,i){var n=e(window).scrollTop(),r=n+e(window).height(),o=e(t).offset().top,s=o+parseInt(e(t).css("height"));return i===!0?n<o&&r>s:o<=r&&s>=n}}),n("src/utils/setBgImage",[],function(){return function(e,t){if(e)return e.style.backgroundImage='url("'+t+'")',e}}),n("src/utils/getBreakpoint",[],function(){return function(){return window.getComputedStyle(document.body,":after").getPropertyValue("content").replace(/\"|\'/g,"")}}),n("src/utils/utils",["./inViewport","./setBgImage","./getBreakpoint"],function(e,t,i){return{isElementInView:e,setBgImage:t,getBreakpoint:i}}),n("src/image",["jquery","lodash","./config","./utils/utils"],function(e,t,i,n){function r(e,i){this.element=e,this.options=t.assign(this.options,i||{})}function o(e,t,n){n||(n={}),n.x=n.x||.5,n.y=n.y||.5,t===i.BACKGROUND_STRATEGY&&(e.style.backgroundPosition=c(n.x)+" "+c(n.y))}function s(e){var t;switch(e){case"IMG":t=i.IMAGE_STRATEGY;break;case"VIDEO":t=i.POSTER_STRATEGY;break;case"A":t=i.LINK_STRATEGY;break;default:t=i.BACKGROUND_STRATEGY}return t}function a(e,t){var r=s(t.tagName);return r===i.IMAGE_STRATEGY&&(t.src=e),r===i.LINK_STRATEGY&&(t.href=e),r===i.POSTER_STRATEGY&&n.setBgImage(t,e),r===i.BACKGROUND_STRATEGY&&n.setBgImage(t,e),t}function u(e,t){if(t===i.IMAGE_STRATEGY)return e.src;if(t===i.BACKGROUND_STRATEGY){var n=e.style.backgroundImage;return n.slice(4,-1).replace(/["|']/g,"")}throw new Error("Get url invalid strategy detected: ",t)}function c(e){return 100*e+"%"}function f(){return n.getBreakpoint()}return r.prototype.options={requestOnVisible:!0,strategy:"image",breakpoints:i.breakpoints},r.prototype.createBreakpointConfig=function(e,i){var n=i.split(",");return t.each(n,function(t){var i=t.split(" ");"none"===n[0]&&(isLazyLoadStrategy=!0),e[i[0]]=i[1]}),e},r.prototype.init=function(){this.$element=e(this.element),this.breakpointsConfigObj={};var t=this;this.breakpointsConfigObj.none=u(this.element,this.options.strategy),this.createBreakpointConfig(this.breakpointsConfigObj,this.element.getAttribute(i.attrNameSlug)),this.setPositionConfig(),this.options.requestOnVisible||this.checkBreakpoint(),this.$element=e(this.element),e(window).on("resize orientationchange",function(){t.checkBreakpoint()}),this.checkViewportTh=function(){if(!t.visible){var e=n.isElementInView(t.$element);e&&(t.visible=!0,t.checkBreakpoint())}},this.checkViewportTh(),e(window).on("scroll load",this.checkViewportTh),e(window).on("resize",this.checkViewportTh)},r.prototype.setPositionConfig=function(){var e=this,t=this.element.getAttribute(i.positionAttrSlug);t&&(this.positionConfig={},t.split(",").map(function(t){var i=t.split(" ");e.positionConfig[i[0]]={x:i[1].split("/")[0],y:i[1].split("/")[1]}}))},r.prototype.getAvailableBreakpoint=function(e,t,i){var n,r=i;if(t[e])n=e;else for(var o=r.indexOf(e);o>=0;o--)if("undefined"!=typeof t[r[o]]){n=r[o];break}return n},r.prototype.getImage=function(e){var t=this,i=this.getAvailableBreakpoint(e,this.breakpointsConfigObj,this.options.breakpoints),n=new Image;if(t.positionConfig){var r=this.positionConfig[i]||this.positionConfig.none;o(this.element,this.options.strategy,r)}this.options.forceUpdate&&a(this.breakpointsConfigObj[i],t.element,t.options.strategy),n.src=this.breakpointsConfigObj[i],n.onload=function(){a(n.src,t.element,t.options.strategy)}},r.prototype.checkBreakpoint=function(){this.options.requestOnVisible&&!this.visible||this.currentBreakPoint!==f()&&(this.currentBreakPoint=f(),this.getImage(this.currentBreakPoint))},r.prototype.delete=function(){this.checkViewportTh&&(e(window).off("scroll",this.checkViewportTh),e(window).off("resize",this.checkViewportTh))},r}),n("src/images",["jquery","lodash","./config","./image","./utils/utils"],function(e,t,i,n,r){function o(e){this.layout=e}return o.prototype.init=function(){var e=this.getProgressiveItems(document);this.progressiveImages&&this.progressiveImages.length&&this.progressiveImages.forEach(function(e){e.delete()}),this.progressiveImages=[],this.addItems(e)},o.prototype.getProgressiveItems=function(e){return e.querySelectorAll("["+i.attrNameSlug+"]")},o.prototype.addItems=function(i){var r=this;return[].forEach.call(i,function(i){var o=e(i).attr("progressive-image-src-config"),s=o?JSON.parse(o.replace(/'/g,'"')):{},a=new n(i,t.assign(s,{strategy:r.getStrategyByTag(i)}));a.init(r.layout),r.progressiveImages.push(a)}),this},o.prototype.getStrategyByTag=function(e){return"image"===e.tagName.toLowerCase()?i.IMAGE_STRATEGY:i.BACKGROUND_STRATEGY},o.prototype.checkBreak=function(){[].forEach.call(this.progressiveImages,function(e){e.checkBreakpoint()})},o}),n("jquery",function(){return e}),n("lodash",function(){return _}),i("src/images")});